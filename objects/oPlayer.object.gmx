<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sPlayer</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>2</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>sPlayerMask</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//vysnc: display_reset(anti-aliasing level, vsync);
//display_reset(0, true);

global.showlevelbanner = true;
playerState = "idle"
if (x &gt; room_width/2){
    sprite_index = sPlayerL
}
gr = 0;
gl = 0;
vspd = 0;
hspd = 0;
stick = 0;
jump = 0;
death = 0;
deathbylava = 0;
deathbylaser = 0;
sinking = 0;
_end = 0;
walling = 0;
ji = 0;
jstick = 0;
move = 1;
jm = 0;
_ii = 1;
cstick = 0;
justpressedup = 0;
jc = 30;
hwall = 0;
image_speed = .1;
if !instance_exists(oControl) {instance_create(0,0,oControl)}
if !instance_exists(oDisplay) {instance_create(0,0,oDisplay)}
num = 0;
smokei = 0;
times = -1;
sinktimer = 0;





</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>deathbylava = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>justpressedup = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>cstick = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>jm = 0
_ii = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>move = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>jstick = 0
walling = 0
hspd = 0

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>wscool = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_create(x,y,oFinishMenu);
/*sleep_hack(180*(1/(delta)))
global.showlevelbanner = true;
if (room_exists(room_next(room))) {
    room_goto_next();
}*/
times[0] = real(room_name_to_times(room_get_name(room),0));
times[1] = real(room_name_to_times(room_get_name(room),1));
times[2] = real(room_name_to_times(room_get_name(room),2));
//show_error(string(times[0])+" "+string(times[1])+" "+string(times[2]),0);


if (oControl.timer &lt; ds_map_find_value(global.bestlvltimes,get_room_name(room_get_name(room)))){
    ds_map_replace(global.bestlvltimes,get_room_name(room_get_name(room)),oControl.timer);
}
var besttime = ds_map_find_value(global.bestlvltimes,get_room_name(room_get_name(room)));
if (besttime &lt;= times[2]){
    ds_map_replace(global.roomstars,get_room_name(room_get_name(room)),3);
} else if (besttime &lt;= times[1]){
    ds_map_replace(global.roomstars,get_room_name(room_get_name(room)),2);
} else if (besttime &lt;= times[0]){
    ds_map_replace(global.roomstars,get_room_name(room_get_name(room)),1);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (keyboard_check_pressed(global.restartKey)) {
    room_restart();
}
smokei = choose(0,1,2,3,4,5,6,7)
if (sinking) {
    sinktimer++;
    instance_create(x+choose(-5,-4,-3,-2,-1,0,1,2,3,4,5),y-4,oPSmoke);
    if (sinktimer &gt; 9) {
    sinktimer = 0;
    }
}
if smokei = 1 {if sprite_index = sPlayer {instance_create(x+6,y-4,oPSmoke)} else {instance_create(x-6,y-4,oPSmoke)}}
if move = 1 {
if (keyboard_check(global.leftKey)) {
    sprite_index = sPlayerL;
    global.showlevelbanner = false;
}
if (keyboard_check(global.rightKey)) {
    sprite_index = sPlayer;
    global.showlevelbanner = false;
}
if (keyboard_check_pressed(global.upKey)) {
    if (place_meeting(x,y+15,oBlock) || place_meeting(x+15,y,oGlass)) &amp;&amp; (justpressedup == 0) &amp;&amp; vspd &gt; 0{
        justpressedup = 1
        alarm[6] = 60*(1/(delta));
    }
    global.showlevelbanner = false;
}
if (keyboard_check_released(global.downKey)) {
    justpressedup = 0;
}

if place_meeting(x,y+1,oBlock) {
    vspd = 0
    jump = 0
    ji = 1
    stick = 0
    walling = 0
    jm = 1
    cstick = 0;
    if hspd &lt; 4 &amp;&amp; hspd &gt; -4 &amp;&amp; !place_meeting(x,y,oVine) {
        if (!sinking){
            hspd = (keyboard_check(global.rightKey)-keyboard_check(global.leftKey))*3;
        } else {
            hspd = (keyboard_check(global.rightKey)-keyboard_check(global.leftKey));
        }
    } 
}

if keyboard_check(global.rightKey) {gr = 1}
if keyboard_check(global.leftKey) {gl = 1}
if place_meeting(x,y,oVine){
    ji = 1
    stick = 0
    walling = 0
    jm = 1
    cstick = 0
    vspd = 0;
    hspd = 0;
    if !(place_meeting(x,y-1,oBlock)) {
        y -= keyboard_check(global.upKey)
    }
    if !(place_meeting(x,y+1,oBlock)) {
    y += keyboard_check(global.downKey)
    }
    if !(place_meeting(x+1,y,oBlock)) {
        x += keyboard_check(global.rightKey)
    }
    if !(place_meeting(x-1,y,oBlock)) {
        x -= keyboard_check(global.leftKey)
    }
}
if (keyboard_check_pressed(global.upKey) || (keyboard_check(global.upKey) &amp;&amp; justpressedup == 1 )) &amp;&amp; jm = 1  &amp;&amp; !place_meeting(x,y,oVine) &amp;&amp; !sinking{
    vspd =- 8;  
    jump += 1; 
    ji = 0; 
    jm = 0; 
    sound_play(sndJump); 
    if (keyboard_check(global.upKey) &amp;&amp; justpressedup == 1 ) {justpressedup = 0;}
    }
//if keyboard_check_pressed(global.upKey) &amp;&amp; jm = 1  {vspd =- 8 ;  jump += 1; ji = 0; jm = 0; sound_play(sndJump)}

if keyboard_check_released(global.upKey) {if vspd &lt; 0 &amp;&amp; !place_meeting(x,y,oVine){vspd += 2.5*(delta)}}//
if keyboard_check_released(global.leftKey) {gl = 0}
if keyboard_check_released(global.rightKey) {gr = 0}
else if !(place_meeting(x,y+1,oBlock)) &amp;&amp; !sinking {    
    if place_meeting(x+1,y,oBlock) &amp;&amp; !place_meeting(x,y+1,oBlock) {stick = 1; if hwall = 0 {if cstick &lt;= 0 {cstick = 11*(1/(delta))};hwall = 1} } else if place_meeting(x-1,y,oBlock) &amp;&amp; !place_meeting(x,y+1,oBlock) {stick = 2; if hwall = 0 {if cstick &lt;= 0 {cstick = 11*(1/(delta))};hwall = 1} } else {stick = 0; cstick = 0;hwall = 0}
    if stick = 1 &amp;&amp; keyboard_check_pressed(global.upKey) &amp;&amp; walling = 0  {vspd = -7.5; hspd = -4; walling = 1; alarm[2] = 3*(1/(delta))/**/; cstick = 0; stick = 0; sound_play(sndJump)}
    if stick = 2 &amp;&amp; keyboard_check_pressed(global.upKey) &amp;&amp; walling = 0  {vspd = -7.5; hspd = 4; walling = 1; alarm[2] = 3*(1/(delta))/**/; cstick = 0; stick = 0; sound_play(sndJump)} 
    if jm = 1 &amp;&amp; _ii = 1 {_ii = 0;alarm[4]=2*(1/(delta))/**/}
}
if stick &gt;= 1 &amp;&amp; cstick &lt;= 0 {    
    if hspd &lt; 4&amp;&amp; hspd &gt; -4 &amp;&amp; !place_meeting(x,y,oVine){
        hspd += ((keyboard_check(global.rightKey)-keyboard_check(global.leftKey)));
    }
}
if (!sinking){
    if jump = 0 &amp;&amp; ji = 1 &amp;&amp; jm = 0{jump = 1}
    if vspd &lt; 10 &amp;&amp; stick = 0 &amp;&amp; !place_meeting(x,y,oVine){
    vspd += 0.5*(delta/2)} else if vspd &lt; 4 &amp;&amp; !place_meeting(x,y,oVine){vspd += 0.3*(delta/2)}//
    if gr = 0 &amp;&amp; gl = 0 &amp;&amp; stick = 0 &amp;&amp; walling = 0{
    if hspd &lt; 4 &amp;&amp; hspd &gt; -4 {
    hspd += ((keyboard_check(global.rightKey)-keyboard_check(global.leftKey))) }}
        
    else if gr = 1 &amp;&amp; !keyboard_check(global.leftKey) &amp;&amp; stick = 0 &amp;&amp; walling = 0 {
    if hspd &lt; 4.5&amp;&amp; hspd &gt; -4.5 {
    hspd += ((keyboard_check(global.rightKey)-keyboard_check(global.leftKey)))
        }
        }
    
    else if gl = 1 &amp;&amp; !keyboard_check(global.rightKey) &amp;&amp; stick = 0 &amp;&amp; walling = 0{
    if hspd &lt; 4.5 &amp;&amp; hspd &gt; -4.5 {
    hspd += ((keyboard_check(global.rightKey)-keyboard_check(global.leftKey)))
        }
        }
} else {
    if !place_meeting(x,y+1,oBlock)
    {
        if (sinktimer mod 3 == 0) {
            y++;
        }
    }
}
if keyboard_check_released(global.leftKey) &amp;&amp; hspd &lt; 0 &amp;&amp; walling = 0{hspd = 0}
if keyboard_check_released(global.rightKey) &amp;&amp; hspd &gt; 0 &amp;&amp; walling = 0{hspd = 0}
        
repeat(abs(hspd)) 
{
    if !place_meeting(x+sign(hspd),y,oBlock) &amp;&amp; !place_meeting(x,y,oVine)
    {
    x += (sign(hspd)*delta)//
    }
}
repeat(abs(vspd)) 
{   
    if !place_meeting(x,y+sign(vspd),oBlock) &amp;&amp; !sinking
    {
    y += (sign(vspd)*delta)//
    }
    else if vspd &lt; 0 &amp;&amp; place_meeting(x,y+vspd,oBlock) {vspd = 0}
}
if vspd &lt; 10 &amp;&amp; stick = 0{
    vspd += 0.5*(delta/2)} else if vspd &lt; 4 {vspd += 0.3*(delta/2)} //groundpound: vspd += 0.5*(delta/2)+(1.7*(delta/2)*(keyboard_check(vk_space)))} else if vspd &lt; 4 {vspd += 0.3*(delta/2)}
if death = 1 &amp;&amp; _end = 0 {
    if (!deathbylaser){
    repeat(random_range(15,20)) {
    var expl, expl2;
    expl = instance_create(x,y,oPExpl)
    expl.direction = random(360)
    expl.speed = 5*(delta)
    }
    }
    if (!deathbylaser) {
        create_ragdoll_player(hspd,vspd);
    }
    global.playerDeaths++;
    if (ds_map_exists(global.levelDeaths,get_room_name(room_get_name(room)))){
        ds_map_replace(global.levelDeaths,get_room_name(room_get_name(room)),ds_map_find_value(global.levelDeaths,get_room_name(room_get_name(room)))+1);
    }
_end = 1
sound_play(sndDeath)
//global.showlevelbanner = false;
instance_destroy()
}
if deathbylava = 1 &amp;&amp; _end = 0 {
    repeat(random_range(20,30)) {
    instance_create(x,y,oPSmoke);
    instance_create(x-7,y,oPSmoke);
    instance_create(x+7,y,oPSmoke);
    }
    global.playerDeaths++;
    if (ds_map_exists(global.levelDeaths,get_room_name(room_get_name(room)))){
        ds_map_replace(global.levelDeaths,get_room_name(room_get_name(room)),ds_map_find_value(global.levelDeaths,get_room_name(room_get_name(room)))+1);
    }
_end = 1
sound_play(sndDeath)
//global.showlevelbanner = false;
instance_destroy()
}
}
if (keyboard_check(global.leftKey) &amp;&amp; (place_meeting(x+1,y,oBlock) || place_meeting(x+2,y,oGlass)))|| (keyboard_check(global.rightKey) &amp;&amp; (place_meeting(x-1,y,oBlock || place_meeting(x+2,y,oGlass)))){
cstick -= 1}

if place_meeting(x,y+2,oPolRight)  {var p; p = instance_nearest(x,y+2,oPolRight); if p.dir = 1 &amp;&amp; !place_meeting(x+2,y,oBlock) {x += 2} else if p.dir = 0 &amp;&amp; !place_meeting(x-2,y,oBlock){x -= 2}}
if place_meeting(x+2,y,oPolRight)  {var p; p = instance_nearest(x+2,y,oPolRight); if p.dir = 1 &amp;&amp; !place_meeting(x+2,y,oBlock) {x += 2} else if p.dir = 0 &amp;&amp; !place_meeting(x-2,y,oBlock){x -= 2} else if place_meeting(x+7,y,oMoveMarker) {death = 1}}
if place_meeting(x-2,y,oPolRight)  {var p; p = instance_nearest(x-2,y,oPolRight); if p.dir = 1 &amp;&amp; !place_meeting(x+2,y,oBlock) {x += 2} else if p.dir = 0 &amp;&amp; !place_meeting(x-2,y,oBlock){x -= 2} else if place_meeting(x-7,y,oMoveMarker) {death = 1}}
move_snap(1,1)

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="oLava">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if sinking == 0 &amp;&amp; (other.image_index == 1) {
    vspd = 0.5;
    sinking = 1;
    alarm[7] = 30*(1/(delta))
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="oGold">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
_end = 1
sound_play(sndFinish)
move = 0
with(other) {
    instance_destroy();
    }

/*sleeper = instance_create(x,y,oSleep);
sleeper.speed = 37.5;
sleeper.direction = 180;*/

oControl.playing = false;
alarm[0] = 15*(1/(delta));//60*(1/(delta))


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>death = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//draw_sprite(sprite_index,image_index,x,y);
draw_sprite(sprite_index,image_index,floor(x),floor(y));



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="122">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>window_set_fullscreen(!window_get_fullscreen())
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if room_exists(room_next(room)) {
global.playerDeaths = 0;
room_goto_next() }
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
